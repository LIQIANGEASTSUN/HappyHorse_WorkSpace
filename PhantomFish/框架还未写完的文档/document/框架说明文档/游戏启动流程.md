# 游戏启动流程

#### 一：游戏启动场景
Assets\SubAssets\Scenes\GameRoot\GameRoot.unity
场景中GameRoot 物体上挂载 GameRoot.cs
GameRoot.cs 脚本中以 FSM有限状态机启动，添加了下面一系列状态
<br><br><br>

#### (1.1)StateAppVersion ：App版本检测
检测游戏中 AppVersion.txt 客户端版本与CDN服务器上存储的版本比较，逻辑判断是否需要强制更新客户端
如果需要强制更新版本，跳转到应用市场更新
如果不需要热更则进入下一步 (1.2)
<br><br><br>

#### (1.2)StateResVersion：客户端资源检测
检测游戏中 ResVersion.txt 资源版本与CDN服务器上存储的资源版本比较，逻辑判断是否需要热更新资源
如果需要热更新，获取到所有需要热更新的资源名，然后跳转到(1.3)
如果不需要热更新，跳转到(1.4)
<br><br><br>

#### (1.3)StateResUpdate：热更新资源下载管理
依据StateResVersion 中获取的所有需要热更新的资源名，进行热更新
热更新资源下载完毕，跳转到 (1.4)
StateResVersion和 StateResUpdate 模块具体逻辑请看：框架说明文档\Addressable部分
<br><br><br>

#### (1.4)StateResProcessing：资源处理
到这里，客户端资源已经是最新的了，做一些需要处理的逻辑
比如 使用HybridCLR 的需要把 热更dll 加载一下
比如 使用 Xlua 的需要重新定向一下 PackPath 之类
预读取 策划配置表
等一系列非游戏逻辑，可以在这里处理
<br><br><br>

#### (1.5)StateStartGame ：开始游戏
到此就可以开始游戏了
启动入口是 Game.cs 这里添加了 Game脚本
GameObject game = new GameObject("Game");
game.AddComponent<Game>();
<br><br><br>











