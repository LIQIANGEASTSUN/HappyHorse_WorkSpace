# 特效模块


#### 代码目录


```chsarp
    Assets\Scripts\Frame\Effect
```



```chsarp
    特效枚举类型
    /// <summary>
    /// 特效类型
    /// </summary>
    public enum EffectType
    {
        //世界坐标特效
        WorldPosition = 1,
        // ConfigToLines 局部坐标
        TargetLocal = 2,
        // ConfigToLines 骨骼挂点坐标
        TargetBone = 3,
    }
```



**播放特效传递数据基类IEffectData**   <br>
根据特效类型实现不同的 数据类    <br>
//世界坐标特效              

```chsarp
    EffectWorldData
```


**目标物体局部坐标特效数据**      <br>
```chsarp
    EffectLocalData
```
<br>

**目标物体骨骼挂点特效数据**     <br>
```chsarp
    EffectBoneData
```
<br>

**特效基类EffectEntityBase**    <br>
如果特效 是循环类特效，则特效不自动销毁   <br>
如果特效 不是循环类特效，则 计算 延迟时间 + 特效时长 计算销毁时间，播放时间完成，销毁特效   <br>

//根据目标骨骼挂点生成动画   <br>
```chsarp
    EffectEntityTargetBone
```
   
加载特效不是挂在骨骼节点上，而是通过计算每帧设置坐标   <br>
```chsarp
    Vector3 position = target.TransformPoint(localPosition);
```


**根据目标局部坐标生成特效**
```chsarp
    EffectEntityTargetLocal
```

**每帧计算坐标并赋值给特效**
```chsarp
    // 世界坐标创建特效
    EffectEntityWorld
    在世界坐标位置生成特效
```


**特效管理器**
```chsarp
    EffectManager.cs 单利类

    // 播放特效，传入不同的数据类，返回的是特效实例instanceId
    public int Play(IEffectData effectData)

    // 移除特效
    public void RemoveEffect(int instanceId)

    // 移除所有特效
    public void RemoveAll()
```


